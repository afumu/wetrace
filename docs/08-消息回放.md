# 消息回放

WeTrace 的消息回放功能可以模拟聊天对话的实时展开过程，按照消息的原始时间间隔逐条显示，帮助还原对话场景。

## 进入回放页面

点击左侧导航栏的「回放」进入消息回放页面。首先需要选择一个会话。

## 选择会话

回放页面初始显示会话选择界面：

1. 页面展示所有可用会话，每个会话显示头像和名称
2. 顶部搜索框支持按会话名称或 ID 搜索
3. 点击目标会话即可进入回放模式

## 回放界面

进入回放模式后，页面分为三个区域：

- **顶部栏**：显示会话名称、消息总数、返回按钮和日期筛选
- **消息区域**：以聊天气泡形式逐条展示消息，支持所有消息类型（文本、图片、语音、视频等）
- **底部控制栏**：播放控制、速度选择和进度条

## 播放与暂停

底部控制栏左侧有播放/暂停按钮：

- 点击播放按钮开始回放，消息将按原始时间间隔逐条出现
- 回放过程中按钮变为暂停图标，点击可暂停回放
- 所有消息播放完毕后，回放自动停止

## 速度控制

播放按钮右侧提供四个速度选项：

| 速度 | 说明 |
|------|------|
| 1x | 原始速度，按消息实际时间间隔播放 |
| 2x | 2 倍速，时间间隔缩短为原来的一半 |
| 4x | 4 倍速 |
| 8x | 8 倍速，快速浏览大量消息 |

当前选中的速度按钮会高亮显示。可以在播放过程中随时切换速度，立即生效。

> 为保证流畅体验，无论选择何种速度，两条消息之间的最小间隔为 80 毫秒，最大间隔为 2 秒。

## 进度条拖拽

控制栏中间是进度条滑块，显示当前回放进度：

- 滑块左侧为已播放区域，右侧为未播放区域
- 拖拽滑块可跳转到任意位置，立即显示该位置之前的所有消息
- 进度条右侧显示计数器（如 `150 / 500`），表示已显示消息数和总消息数
- 拖拽进度条时会自动暂停播放，需手动点击播放按钮继续

## 日期筛选

顶部栏右侧提供日期选择器，可限定回放的消息范围：

1. 点击日期输入框，选择一个起始日期
2. 系统将重新加载从该日期开始的消息
3. 回放进度会自动重置为起点
4. 清空日期则恢复为全部消息

## 自动滚动

回放过程中，消息区域会自动滚动到最新出现的消息，确保新消息始终可见。无需手动滚动即可跟随对话进展。

## 返回会话选择

点击顶部栏左侧的「返回」按钮，可退出当前回放并返回会话选择界面。返回时回放进度会重置。

## 使用建议

- 初次浏览建议使用 4x 或 8x 速度快速了解对话概况
- 发现关键内容时暂停回放，仔细阅读上下文
- 使用日期筛选可快速定位到特定时间段的对话
- 每次回放最多加载 1000 条消息，超长会话建议配合日期筛选使用
