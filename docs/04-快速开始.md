# 快速开始

本文档将引导你从安装到看到第一条聊天记录的完整流程。

## 前提条件

- Windows 操作系统（密钥自动提取仅支持 Windows）
- 电脑上已安装并登录微信
- 已下载 WeTrace 发布包或从源码编译完成

## 步骤一：启动程序

双击运行 `wetrace.exe`，程序会自动打开浏览器并跳转至：

```
http://127.0.0.1:5200
```

首次启动时，你会看到用户协议弹窗和合规提示，阅读并同意后进入主界面。

## 步骤二：配置微信路径

1. 点击左侧导航栏进入 **设置** 页面
2. 在"微信路径配置"区域，点击 **自动探测** 按钮
   - 程序会自动检测微信安装路径和数据存储路径
   - 如果自动探测失败，可手动填写：
     - **微信安装路径**：如 `C:\Program Files\Tencent\WeChat`
     - **微信数据路径**：如 `C:\Users\你的用户名\Documents\WeChat Files\wxid_xxx`

## 步骤三：获取密钥

1. 确保微信已在电脑上登录并正在运行
2. 在设置页面点击 **获取密钥** 按钮
   - 程序会自动从微信进程中提取数据库密钥（DB Key）
   - 获取成功后，密钥会自动填入配置
3. 点击 **获取图片密钥** 按钮
   - 按提示在微信中随便打开一张聊天图片
   - 程序会自动捕获图片解密所需的 XOR Key

## 步骤四：解密数据库

1. 在设置页面点击 **开始解密** 按钮
2. 程序会扫描微信数据目录下的 `db_storage` 子目录，找到所有 `.db` 文件
3. 使用获取到的密钥对数据库进行 AES-256-CBC 解密
4. 解密后的 SQLite 文件存放在 `data/` 工作目录中
5. 解密完成后，页面会提示成功解密的文件数量

## 步骤五：浏览聊天记录

1. 点击左侧导航栏的 **聊天记录** 进入聊天页面
2. 左侧会显示所有会话列表（联系人和群聊）
3. 点击任意会话，右侧即可查看完整的聊天记录
4. 聊天记录支持：
   - 文本消息浏览
   - 图片预览（需要已获取图片密钥）
   - 语音播放（自动从 Silk 格式转码为 MP3）
   - 视频播放
   - 表情包渲染

## 步骤六：探索更多功能

完成以上步骤后，你可以继续探索 WeTrace 的其他功能：

| 功能 | 入口 | 说明 |
|------|------|------|
| 全局搜索 | 左侧导航 → 搜索 | 跨所有会话检索关键词，支持上下文查看 |
| 通讯录 | 左侧导航 → 通讯录 | 浏览完整联系人列表，支持导出 |
| 数据分析 | 聊天页面右上角 | 查看时间分布、消息类型、活跃度等统计图表 |
| 词云 | 左侧导航 → 词云 | 生成全局或单会话的聊天词云 |
| 导出 | 聊天页面右上角 → 导出 | 将聊天记录导出为 HTML/PDF/Excel/Word |
| AI 工具 | 左侧导航 → AI 工具 | 聊天摘要、情感分析、模拟对话（需先配置 AI） |
| 年度报告 | 左侧导航 → 年度报告 | 查看年度聊天数据汇总 |

## 常见问题

### 获取密钥失败

- 确保微信已登录并正在运行
- 以管理员权限运行 WeTrace
- 部分杀毒软件可能拦截密钥提取操作，请临时关闭或添加白名单

### 解密后看不到聊天记录

- 检查微信数据路径是否正确指向了包含 `db_storage` 子目录的用户目录
- 确认密钥是否与当前登录的微信账号匹配
- 查看程序控制台输出的日志信息排查错误

### 图片无法显示

- 确保已获取图片密钥（XOR Key）
- 图片密钥需要在微信中打开一张图片后才能捕获
- 检查微信数据路径配置是否正确
