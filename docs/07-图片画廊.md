# 图片画廊

WeTrace 提供独立的图片画廊功能，可以集中浏览所有聊天中的图片，支持筛选、分页和灯箱预览。

## 进入图片画廊

点击左侧导航栏的「画廊」进入图片画廊页面。页面顶部为筛选区域，下方为图片网格。

## 图片网格浏览

图片以网格形式展示，采用响应式布局：

- 小屏幕：每行 2 张图片
- 中等屏幕：每行 3-4 张图片
- 大屏幕：每行 5 张图片

每张图片以正方形缩略图展示，鼠标悬停时会显示：
- 发送者名称
- 发送日期

页面顶部显示当前筛选条件下的图片总数。

## 筛选功能

图片画廊提供两种筛选方式，可组合使用：

### 按会话筛选

在筛选区域的输入框中输入会话 ID，可仅显示该会话中的图片。清空输入框则显示所有会话的图片。

### 按时间范围筛选

点击时间范围按钮可快速切换：

| 选项 | 说明 |
|------|------|
| 全部 | 显示所有时间的图片（默认） |
| 最近一周 | 仅显示最近 7 天内的图片 |
| 最近一月 | 仅显示最近 30 天内的图片 |
| 最近一年 | 仅显示最近一年内的图片 |

当前选中的时间范围按钮会高亮显示。如果设置了任何筛选条件，会出现「清除」按钮，点击可一键重置所有筛选。

## 灯箱预览

点击任意图片缩略图，即可打开灯箱（Lightbox）模式进行全尺寸查看。

### 查看大图

- 灯箱以全屏遮罩形式展示，背景变暗
- 图片以原始比例居中显示，最大不超过屏幕的 90% 宽度和 85% 高度
- 如果全尺寸图片加载失败，会自动回退显示缩略图

### 键盘导航

灯箱模式下支持以下键盘操作：

| 按键 | 操作 |
|------|------|
| 左箭头 `←` | 查看上一张图片 |
| 右箭头 `→` | 查看下一张图片 |
| `Esc` | 关闭灯箱 |

也可以点击图片两侧的左右箭头按钮进行导航，或点击遮罩背景区域关闭灯箱。

### 图片元数据

灯箱底部居中显示当前图片的元数据信息：

- 发送者名称
- 发送时间
- 当前图片在列表中的位置（如 `3/50`）

## 分页

图片画廊每页显示 50 张图片。当图片总数超过 50 张时，页面底部会出现分页控件：

- **上一页**：点击加载上一页图片（第一页时禁用）
- **页码指示**：显示当前页码和总页数（如「第 2 / 10 页」）
- **下一页**：点击加载下一页图片（最后一页时禁用）

切换筛选条件时，页码会自动重置为第一页。

## 会话图片画廊

除了全局图片画廊外，在聊天页面中也可以查看单个会话的图片。在会话工具栏点击「更多」>「查看图片」，即可打开该会话专属的图片画廊弹窗，功能与全局画廊一致。
