# Wetrace - 微信聊天记录取证与分析工具

Wetrace 是一款专为 PC 端微信设计的聊天记录取证、备份与可视化分析工具。它能够自动提取微信数据库密钥，解密并解析本地数据库，提供流畅的 Web 交互界面进行浏览、搜索、导出以及深度的聊天行为分析。

## 🌟 核心功能

*   **自动密钥提取**：无需手动寻找偏移量，支持自动获取微信数据库密钥 (`DB Key`) 及媒体解密密钥 (`Image Key`)。
*   **多版本支持**：兼容 PC 微信`v4` 版本的数据库。
*   **丝滑 Web 体验**：基于 React + Go 构建，提供流畅的聊天列表滚动、全局搜索及媒体预览（图片、表情包、视频、语音）。
*   **深度数据分析**：
    *   **个人/群聊统计**：消息总量、互动最频繁的联系人排行。
    *   **时间维度分析**：按小时、天、周、月统计聊天热度曲线。
    *   **消息类型分布**：文本、图片、语音、视频、表情包比例分析。
    *   **重复性分析**：识别聊天中的重复话术。
*   **取证导出**：支持将聊天记录导出为格式美化的 HTML 或 PDF，方便留存与阅读。
*   **离线使用**：完全本地运行，不上传任何隐私数据，确保数据安全。

---

## 🚀 快速上手教程

### 1. 准备工作

*   **运行环境**：目前仅支持 Windows 操作系统。
*   **登录微信**：请先在电脑上登录需要提取记录的微信账号。

### 2. 启动程序

1.  下载并解压 Wetrace 发布包。
2.  双击运行 `main.exe` (或通过命令行运行)。
3.  程序启动后会自动打开浏览器并跳转至 `http://127.0.0.1:5200`。

### 3. 密钥获取与数据加载

首次使用时，你需要配置微信的数据路径并获取密钥：

1.  **路径设置**：
    *   在界面设置中，点击“自动探测”来定位微信安装路径和数据存储路径。
    *   确保 `WECHAT_DB_SRC_PATH` 指向你的微信数据目录（通常是 `Documents\WeChat Files\wxid_xxx`）。
2.  **获取数据库密钥**：
    *   点击“获取密钥”按钮。程序会尝试 Hook 运行中的微信进程以提取 `DB Key`。
    *   **注意**：此操作可能涉及重启微信，请确保微信已处于登录状态。
3.  **获取媒体密钥**：
    *   点击“获取图片密钥”并按照提示在微信中随便打开一张聊天图片，程序将自动捕获 `XorKey`。
4.  **开始解密**：
    *   点击“开始解密”，程序会将微信原始数据库解密并存储到本地 `data` 目录。

### 4. 浏览与分析

*   **左侧导航**：在“会话”列表中选择联系人或群聊。
*   **搜索**：使用顶部的搜索框进行全局关键词检索。
*   **仪表盘**：点击“数据分析”查看整体的消息热度图表。
*   **导出**：进入具体聊天室，点击右上角的“导出”按钮即可生成离线文档。

---

## 🛠️ 开发者指南 (编译)

如果你希望从源码构建 Wetrace：

### 后端 (Go)
1.  确保已安装 Go 1.24+。
2.  安装 `gcc` 环境（用于 `go-sqlite3` 编译）。
3.  运行：`go build -o wetrace.exe main.go`。

### 前端 (React)
1.  进入 `ui` 目录。
2.  执行 `npm install`。
3.  执行 `npm run build` 将静态资源打包到 `ui/dist`。

---

## ⚖️ 免责声明

本工具仅供学习交流、个人数据备份及合法的电子取证研究使用。请勿将其用于任何非法用途（如侵犯他人隐私）。使用者因违反法律法规而产生的一切后果，由使用者自行承担，开发者不承担任何法律责任。

本项目的开发过程中参考了以下优秀的开源项目和资源：

## 致谢

主要参考项目
echotrace - 微信数据解析/取证工具

本项目大量功能参考并复用其实现思路，提供了重要技术支持
wx_key - 微信数据库与图片密钥提取工具

支持获取微信 4.x 数据库密钥与缓存图片密钥
本项目推荐使用此工具获取密钥
