# Wetrace - 微信聊天记录取证与分析工具

Wetrace 是一款专为 PC 端微信设计的聊天记录取证、备份与可视化分析工具。它能够自动提取微信数据库密钥，解密并解析本地数据库，提供流畅的 Web 交互界面进行浏览、搜索、导出以及深度的聊天行为分析。

## 核心功能

*   **自动密钥提取**：无需手动寻找偏移量，支持自动获取微信数据库密钥 (`DB Key`) 及媒体解密密钥 (`Image Key`)。
*   **多版本支持**：兼容 PC 微信 `v4` 版本的数据库。
*   **丝滑 Web 体验**：基于 React + Go 构建，提供流畅的聊天列表滚动、全局搜索及媒体预览（图片、表情包、视频、语音）。
*   **深度数据分析**：
    *   个人/群聊统计：消息总量、互动最频繁的联系人排行。
    *   时间维度分析：按小时、天、周、月统计聊天热度曲线。
    *   消息类型分布：文本、图片、语音、视频、表情包比例分析。
    *   重复性分析：识别聊天中的重复话术。
*   **AI 智能分析**：集成 AI 能力，支持对话摘要、情感分析、待办提取、关键信息提取、模拟聊天。
*   **多格式导出**：支持 HTML、TXT、CSV、XLSX、DOCX、PDF 及法律取证格式导出。
*   **监控告警**：支持关键词/AI 智能监控，通过 Webhook 或飞书推送告警。
*   **自动同步与备份**：定时同步微信数据，自动备份聊天记录。
*   **离线使用**：完全本地运行，不上传任何隐私数据，确保数据安全。

---

## 文档目录

完整的使用文档位于 [`docs/`](docs/) 目录下，按功能模块组织：

### 项目总览与部署

| 文档 | 说明 |
|------|------|
| [01-项目简介](docs/01-项目简介.md) | 项目定位、功能概览、技术架构 |
| [02-安装部署](docs/02-安装部署.md) | 环境要求、编译构建、启动运行 |
| [03-配置说明](docs/03-配置说明.md) | .env 所有配置项详解 |
| [04-快速开始](docs/04-快速开始.md) | 从安装到浏览聊天记录的完整流程 |

### 核心聊天功能

| 文档 | 说明 |
|------|------|
| [05-会话与消息](docs/05-会话与消息.md) | 会话列表、消息浏览、12种消息类型、搜索与筛选 |
| [06-联系人管理](docs/06-联系人管理.md) | 联系人列表、分类筛选、搜索、导出 |
| [07-图片画廊](docs/07-图片画廊.md) | 图片网格浏览、筛选、灯箱预览 |
| [08-消息回放](docs/08-消息回放.md) | 消息时间线回放、速度控制、进度拖拽 |
| [09-数据导出](docs/09-数据导出.md) | 7种导出格式详解、语音导出、取证导出 |

### 数据分析与 AI

| 文档 | 说明 |
|------|------|
| [10-年度报告](docs/10-年度报告.md) | 年度统计、图表分析、TOP10 亲密度排行 |
| [11-词云分析](docs/11-词云分析.md) | 全局/会话词云、词频统计表 |
| [12-AI功能](docs/12-AI功能.md) | AI 摘要、待办提取、信息提取、情感分析、模拟聊天、配置与提示词自定义 |

### 高级功能与系统管理

| 文档 | 说明 |
|------|------|
| [13-密钥提取与解密](docs/13-密钥提取与解密.md) | 数据库密钥获取、图片密钥获取、解密流程 |
| [14-自动同步与备份](docs/14-自动同步与备份.md) | 自动同步配置、自动备份配置、手动触发 |
| [15-监控告警](docs/15-监控告警.md) | 关键词/AI 监控规则、Webhook/飞书推送 |
| [16-飞书集成](docs/16-飞书集成.md) | 飞书机器人、多维表格配置与测试 |
| [17-系统设置](docs/17-系统设置.md) | 密码保护、语音转文字、联系人提醒、合规协议 |

---

## 快速上手

### 1. 准备工作

*   **运行环境**：目前仅支持 Windows 操作系统。
*   **登录微信**：请先在电脑上登录需要提取记录的微信账号。

### 2. 启动程序

1.  下载并解压 Wetrace 发布包。
2.  双击运行 `wetrace.exe`（或通过命令行运行）。
3.  程序启动后会自动打开浏览器并跳转至 `http://127.0.0.1:5200`。

### 3. 密钥获取与数据加载

首次使用时，你需要配置微信的数据路径并获取密钥：

1.  **路径设置**：在界面设置中，点击"自动探测"来定位微信安装路径和数据存储路径。
2.  **获取数据库密钥**：点击"获取密钥"按钮，程序会 Hook 运行中的微信进程以提取 `DB Key`。
3.  **获取媒体密钥**：点击"获取图片密钥"，在微信中打开一张聊天图片，程序将自动捕获 `XorKey`。
4.  **开始解密**：点击"开始解密"，程序会将微信原始数据库解密并存储到本地 `data` 目录。

> 详细操作请参考 [04-快速开始](docs/04-快速开始.md) 和 [13-密钥提取与解密](docs/13-密钥提取与解密.md)。

### 4. 浏览与分析

*   **会话浏览**：在左侧"会话"列表中选择联系人或群聊，查看聊天记录。
*   **全局搜索**：使用搜索页面进行跨会话关键词检索。
*   **数据分析**：查看年度报告、词云分析等统计图表。
*   **AI 分析**：使用 AI 工具生成对话摘要、提取待办事项、分析情感趋势。
*   **数据导出**：在聊天页面点击导出按钮，选择所需格式导出。

> 各功能的详细操作请参考上方 [文档目录](#文档目录)。

---

## 开发者指南

如果你希望从源码构建 Wetrace，请参考 [02-安装部署](docs/02-安装部署.md)。

### 后端 (Go)
1.  确保已安装 Go 1.24+。
2.  安装 `gcc` 环境（用于 `go-sqlite3` 编译）。
3.  运行：`go build -o wetrace.exe main.go`。

### 前端 (React)
1.  进入 `ui` 目录。
2.  执行 `npm install`。
3.  执行 `npm run build` 将静态资源打包到 `ui/dist`。

---

## 免责声明

本工具仅供学习交流、个人数据备份及合法的电子取证研究使用。请勿将其用于任何非法用途（如侵犯他人隐私）。使用者因违反法律法规而产生的一切后果，由使用者自行承担，开发者不承担任何法律责任。

---

## 致谢

本项目的开发过程中参考了以下优秀的开源项目和资源：

*   wx_key - 微信数据库与图片密钥提取工具
*   chatlog - 实现消息的解密和读取

